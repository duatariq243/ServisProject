<%- include("partials/header.ejs") %>

<div class="cart-container">

    <h2 class="cart-heading">Your Cart ðŸ›’</h2>

    <% if(cart.length === 0) { %>

        <p class="empty-msg">Your cart is empty. Add items to continue.</p>
        <a href="/products" class="btn-primary">Browse Products</a>

    <% } else { %>

        <ul class="cart-list">
            <% cart.forEach(item => { %>

            <li class="cart-item">
                <div class="item-info">
                    <span class="item-name"><%= item.name %></span>
                    <span class="item-price">$<%= item.price %></span>
                </div>

                <div class="item-quantity">
                    <form action="/cart/update" method="POST">
                        <input type="hidden" name="cart_id" value="<%= item.cart_id %>">
                        <input type="hidden" name="action" value="increment">
                        <button class="qty-btn">+</button>
                    </form>

                    <span class="qty-display"><%= item.quantity %></span>

                    <form action="/cart/update" method="POST">
                        <input type="hidden" name="cart_id" value="<%= item.cart_id %>">
                        <input type="hidden" name="action" value="decrement">
                        <button class="qty-btn">-</button>
                    </form>
                </div>

                <form action="/cart/remove" method="POST">
                    <input type="hidden" name="cart_id" value="<%= item.cart_id %>">
                    <button class="remove-btn">Remove</button>
                </form>
            </li>

            <% }) %>
        </ul>

        <h3 class="cart-total">Total: <span>$<%= total %></span></h3>

        <div class="cart-actions">
            <a href="/checkout" class="btn-primary">Proceed to Checkout</a>
            <a href="/products" class="btn-secondary">Continue Shopping</a>
        </div>

    <% } %>

</div>

<%- include("partials/footer.ejs") %>
